function waterfull(){var o=$(".pin"),t=o.eq(0).outerWidth(),a=Math.floor($(window).width()/t);$("#main").width(t*a).css("margin","0 auto");var i=[];o.each(function(n,r){var s=o.eq(n).outerHeight();if(n<a)i[n]=s,$(r).css({position:"absolute",top:0,left:t*n+"px"});else{var e=Math.min.apply(null,i),l=$.inArray(e,i);$(r).css({position:"absolute",top:e+"px",left:t*l+"px"}),i[l]+=o.eq(n).outerHeight()}})}function checkscroll(){var o=$(".pin");return o.last().offset().top+Math.floor(o.last().height()/2)<$(window).scrollTop()+$(window).height()}$(window).on("load",function(){var o={data:[{src:"1.jpg"},{src:"2.jpg"},{src:"3.jpg"},{src:"4.jpg"},{src:"5.jpg"},{src:"6.jpg"},{src:"7.jpg"},{src:"8.jpg"}]};window.onscroll=function(){checkscroll()&&($.each(o.data,function(o,t){var a=$("<div>").addClass("pin").appendTo($("#main")),i=$("<div>").addClass("box").appendTo(a);$("<img>").attr("src","./images/"+$(t).attr("src")).appendTo(i)}),waterfull())},window.onresize=function(){waterfull()},waterfull()});